# X-Downloader Chrome Extension

一个功能完整的Chrome扩展，用于批量下载小红书笔记内容，包括文本、图片和视频。

## 🚀 主要功能

- **多内容下载**：支持下载笔记的文本、图片和视频
- **智能视频提取**：从Vue组件状态中提取真实视频URL
- **自动文件夹创建**：按时间+标题自动创建文件夹
- **文件过滤**：自动过滤PDF文件和小尺寸图片
- **弹窗层支持**：支持在笔记弹窗层中下载
- **自定义通知**：美观的下载进度和完成通知

## 📁 项目结构

```
chrome_extension/
├── manifest.json          # 扩展配置文件
├── content.js             # 内容脚本（核心功能）
├── background.js          # 后台脚本
├── popup.html             # 弹出窗口界面
├── popup.js               # 弹出窗口逻辑
├── icons/                 # 图标文件
├── install.sh             # 安装脚本
├── README.md              # 项目说明
└── docs/                  # 详细文档
    ├── INSTALL_GUIDE.md   # 安装指南
    ├── VIDEO_EXTRACTION_GUIDE.md  # 视频提取指南
    └── ...
```

## 🛠️ 技术特点

- **Vue组件状态解析**：从`window.__INITIAL_STATE__`中提取视频数据
- **多格式视频支持**：支持H.264和H.265编码格式
- **动态内容检测**：自动检测弹窗层和动态加载的内容
- **文件类型识别**：智能识别和过滤不同类型的文件
- **错误处理**：完善的错误处理和用户反馈机制

## 📦 安装方法

1. 下载或克隆此仓库
2. 运行安装脚本：`./install.sh`
3. 在Chrome中加载扩展（开发者模式）
4. 访问小红书页面即可使用

## 🎯 使用方法

1. 访问小红书笔记页面
2. 点击右上角的下载按钮
3. 选择下载选项（文本、图片、视频）
4. 等待下载完成

## 🔧 开发说明

### 核心文件

- `content.js`：主要的内容脚本，包含所有下载逻辑
- `extractVideosFromGlobalState()`：视频提取函数
- `extractRealVideoUrlFromBlob()`：blob URL处理函数
- `downloadCurrentNote()`：笔记下载主函数

### 调试工具

项目包含多个调试脚本，用于测试不同功能：
- `test_*.js`：各种功能测试脚本
- `debug_*.js`：调试辅助脚本

## 📝 更新日志

### v1.0.0 (2025-07-27)
- ✅ 完整的Chrome扩展功能
- ✅ 视频下载支持（H.264/H.265）
- ✅ 弹窗层下载支持
- ✅ 文件过滤和自动文件夹创建
- ✅ 自定义通知系统

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 📄 许可证

MIT License

---

**注意**：此扩展仅用于学习和个人使用，请遵守相关网站的使用条款。 